(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},75581,e=>{"use strict";let t="content",s="submissions",a=new class{db=null;async init(){return new Promise((e,a)=>{let r=indexedDB.open("ShameToFlameOffline",1);r.onerror=()=>a(r.error),r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=e=>{let a=e.target.result;a.objectStoreNames.contains(t)||a.createObjectStore(t,{keyPath:"id"}).createIndex("type","type",{unique:!1}),a.objectStoreNames.contains(s)||a.createObjectStore(s,{keyPath:"id"})}})}async saveContent(e){return this.db||await this.init(),new Promise((s,a)=>{let r=this.db.transaction([t],"readwrite").objectStore(t).put(e);r.onerror=()=>a(r.error),r.onsuccess=()=>s()})}async getContent(e){return this.db||await this.init(),new Promise((s,a)=>{let r=this.db.transaction([t],"readonly").objectStore(t).get(e);r.onerror=()=>a(r.error),r.onsuccess=()=>s(r.result||null)})}async getContentByType(e){return this.db||await this.init(),new Promise((s,a)=>{let r=this.db.transaction([t],"readonly").objectStore(t).index("type").getAll(e);r.onerror=()=>a(r.error),r.onsuccess=()=>s(r.result||[])})}async deleteContent(e){return this.db||await this.init(),new Promise((s,a)=>{let r=this.db.transaction([t],"readwrite").objectStore(t).delete(e);r.onerror=()=>a(r.error),r.onsuccess=()=>s()})}async getAllContent(){return this.db||await this.init(),new Promise((e,s)=>{let a=this.db.transaction([t],"readonly").objectStore(t).getAll();a.onerror=()=>s(a.error),a.onsuccess=()=>e(a.result||[])})}async queueSubmission(e){return this.db||await this.init(),new Promise((t,a)=>{let r=this.db.transaction([s],"readwrite").objectStore(s).put(e);r.onerror=()=>a(r.error),r.onsuccess=()=>t()})}async getPendingSubmissions(){return this.db||await this.init(),new Promise((e,t)=>{let a=this.db.transaction([s],"readonly").objectStore(s).getAll();a.onerror=()=>t(a.error),a.onsuccess=()=>e(a.result||[])})}async deleteSubmission(e){return this.db||await this.init(),new Promise((t,a)=>{let r=this.db.transaction([s],"readwrite").objectStore(s).delete(e);r.onerror=()=>a(r.error),r.onsuccess=()=>t()})}async getStorageSize(){let e=await this.getAllContent(),t=await this.getPendingSubmissions();return JSON.stringify(e).length+JSON.stringify(t).length}};e.s(["offlineStorage",0,a])},82990,e=>{"use strict";var t=e.i(43476),s=e.i(71645);e.s(["default",0,()=>{let[e,a]=(0,s.useState)(!1),[r,n]=(0,s.useState)(!1),i=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let e=i.current;if(!e)return;let t=()=>{console.log("Video loaded successfully"),a(!0),n(!1),e.currentTime=0;let t=e.play();void 0!==t&&t.then(()=>{console.log("Video autoplay started successfully")}).catch(t=>{console.log("Autoplay prevented by browser, trying to enable:",t),setTimeout(()=>{e.play().catch(e=>console.log("Second play attempt failed:",e))},100)})},s=()=>{console.log("Video failed to load"),n(!0),a(!1)},r=()=>{console.log("Video can start playing"),e.paused&&e.play().catch(e=>console.log("CanPlay event play failed:",e))},o=()=>{e.currentTime=0,e.play().catch(e=>console.log("Loop restart failed:",e))};return e.addEventListener("loadeddata",t),e.addEventListener("error",s),e.addEventListener("canplay",r),e.addEventListener("ended",o),()=>{e.removeEventListener("loadeddata",t),e.removeEventListener("error",s),e.removeEventListener("canplay",r),e.removeEventListener("ended",o)}},[]),(0,t.jsxs)("div",{className:"fixed inset-0 w-full h-full overflow-hidden z-0",children:[!r&&(0,t.jsx)("video",{ref:i,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,preload:"auto",className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ${e?"opacity-100":"opacity-0"}`,children:(0,t.jsx)("source",{src:"/shame-to-flame.mp4",type:"video/mp4"})}),(0,t.jsx)("div",{className:`absolute inset-0 bg-gradient-to-br from-sky-900 via-purple-900 to-flame-900 animate-gradient-shift transition-opacity duration-1000 ${e&&!r?"opacity-0":"opacity-100"}`}),(0,t.jsxs)("div",{className:`absolute inset-0 transition-opacity duration-1000 ${e&&!r?"opacity-20":"opacity-30"}`,children:[(0,t.jsx)("div",{className:"stars"}),(0,t.jsx)("div",{className:"stars2"}),(0,t.jsx)("div",{className:"stars3"})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-transparent to-black/30 dark:from-black/40 dark:via-transparent dark:to-black/50"})]})}])},46250,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(40160),r=e.i(37727);let n=(0,e.i(75254).default)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),i=()=>{let[e,i]=(0,s.useState)(null),[o,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches&&c(!0);let e=e=>{e.preventDefault(),i(e),setTimeout(()=>{d||localStorage.getItem("pwa-install-dismissed")||l(!0)},3e3)},t=()=>{c(!0),l(!1),i(null),console.log("PWA was installed")};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[d]);let u=async()=>{if(e)try{await e.prompt();let{outcome:t}=await e.userChoice;"accepted"===t?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),i(null),l(!1)}catch(e){console.error("Error during install prompt:",e)}},m=()=>{l(!1),localStorage.setItem("pwa-install-dismissed","true")};return!d&&o&&e?(0,t.jsx)("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 animate-slide-up",children:(0,t.jsx)("div",{className:"bg-white/95 dark:bg-gray-800/95 backdrop-blur-md rounded-xl shadow-xl border border-white/20 dark:border-gray-700/50 p-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-flame-400 to-flame-600 rounded-full flex items-center justify-center flex-shrink-0",children:(0,t.jsx)(n,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-white text-sm",children:"Install Shame to Flame"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-xs mt-1 leading-relaxed",children:"Add our ministry app to your home screen for quick access to healing resources, even offline."}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 mt-3",children:[(0,t.jsxs)("button",{onClick:u,className:"inline-flex items-center px-3 py-1.5 bg-flame-600 hover:bg-flame-700 text-white text-xs font-medium rounded-lg transition-colors duration-200",children:[(0,t.jsx)(a.Download,{className:"h-3 w-3 mr-1"}),"Install"]}),(0,t.jsx)("button",{onClick:m,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-xs",children:"Not now"})]})]}),(0,t.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 flex-shrink-0",children:(0,t.jsx)(r.X,{className:"h-4 w-4"})})]})})}):null};function o(){return(0,t.jsx)(i,{})}e.s(["default",()=>o],46250)},33032,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(75254);let r=(0,a.default)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),n=(0,a.default)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),i=(0,a.default)("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);var o=e.i(75581);function l(){let{isOnline:e,pendingCount:a,syncPendingSubmissions:l}=function(){let[e,t]=(0,s.useState)(!0),[a,r]=(0,s.useState)(0);(0,s.useEffect)(()=>{let e=()=>{t(navigator.onLine)};return e(),n(),window.addEventListener("online",i),window.addEventListener("offline",e),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",e)}},[]);let n=async()=>{try{let e=await o.offlineStorage.getPendingSubmissions();r(e.length)}catch(e){console.error("Error getting pending submissions:",e)}},i=async()=>{t(!0),await l()},l=async()=>{try{for(let e of(await o.offlineStorage.getPendingSubmissions()))try{await d(e),await o.offlineStorage.deleteSubmission(e.id)}catch(t){console.error("Failed to sync submission:",e.id,t)}await n()}catch(e){console.error("Error syncing submissions:",e)}},d=async e=>{let t="prayer"===e.type?"/api/submit-prayer":"/api/submit-contact",s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e.data)});if(!s.ok)throw Error(`Server responded with ${s.status}`);return s.json()},c=async(t,s)=>{if(e)try{return await d({id:Date.now().toString(),type:t,data:s,timestamp:Date.now()}),!0}catch(e){console.error("Submission failed, queueing for later:",e)}try{return await o.offlineStorage.queueSubmission({id:Date.now().toString(),type:t,data:s,timestamp:Date.now()}),await n(),!0}catch(e){return console.error("Failed to queue submission:",e),!1}};return{isOnline:e,pendingCount:a,queueSubmission:c,syncPendingSubmissions:l}}(),[d,c]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{c(!e||a>0)},[e,a]),d)?(0,t.jsx)("div",{className:`fixed top-16 left-0 right-0 z-40 ${e?"bg-green-600":"bg-orange-600"} text-white py-2 px-4 shadow-lg transition-all duration-300`,children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n,{className:"w-5 h-5"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:["Back online! ",a>0&&`Syncing ${a} pending submission${a>1?"s":""}...`]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"You're offline. Your submissions will be saved and synced when you reconnect."})]})}),e&&a>0&&(0,t.jsxs)("button",{onClick:l,className:"flex items-center gap-1 bg-white/20 hover:bg-white/30 px-3 py-1 rounded-lg text-sm font-medium transition-colors",children:[(0,t.jsx)(i,{className:"w-4 h-4"}),"Sync Now"]})]})}):null}e.s(["default",()=>l],33032)}]);